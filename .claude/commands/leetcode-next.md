# LeetCode 次のステップを進める

`leetcode/docs/plan.md` の進捗を確認し、次の未完了ステップのテンプレートを生成してユーザーの学習を進める。

## 手順

### 1. 進捗の確認

`leetcode/docs/plan.md` を読み、チェックボックスの状態を確認する。

- `- [x]` → 完了済み
- `- [ ]` → 未完了

最初の未完了ステップ（`- [ ]`）を「次のステップ」として特定する。

完了済みステップの総数と全体数を数え、進捗サマリーを表示する:

```
📊 進捗: 5/82 完了（Step 1: 配列の基本操作 - 1-6 まで完了）
👉 次のステップ: 1-7 reduce — 各要素を変換して新しい配列を返す
```

### 2. ステップの種類を判断

次のステップのIDと説明から種類を判断する:

- **概念学習ステップ**（例: 1-1, 2-1, 5-1 など数字が若いもの）→ テンプレート生成へ
- **練習ステップ**（例: 1-9, 2-10 など `練習:` がついたもの）→ テンプレート生成へ
- **復習ステップ**（🔁マーク付き）→ 復習テンプレート生成へ
- **LeetCode問題の計画ステップ**（7-1a, 8-1a など `a` 付き）→ 問題解説 + アプローチ検討テンプレートへ
- **LeetCode問題の実装ステップ**（7-1b, 8-1b など `b` 付き）→ 実装テンプレートへ

### 3. ディレクトリの準備

対応するステップのディレクトリが存在しない場合は作成する:
- Step 1 → `leetcode/src/step01-array/`
- Step 2 → `leetcode/src/step02-set-map/`
- Step 3 → `leetcode/src/step03-string/`
- Step 4 → `leetcode/src/step04-loops/`
- Step 5 → `leetcode/src/step05-two-pointers/`
- Step 6 → `leetcode/src/step06-hashmap/`
- Step 7 → `leetcode/src/step07-easy-basic/`
- Step 8 → `leetcode/src/step08-easy-advanced/`

`leetcode/package.json` が存在しない場合は `leetcode/` ディレクトリで `npm init -y` を実行する。

### 4. テンプレートファイルの生成

plan.md のステップ情報（ID、テーマ、内容、ファイル名）に基づいて、以下の構成でテンプレートファイルを生成する。

**通常ステップ / 練習ステップのテンプレート:**

```javascript
// =============================================
// Step {ID}: {テーマ}
// {内容の説明}
// =============================================

// --- 説明 ---
// （そのステップで学ぶ概念をわかりやすく説明）
// （具体例を示す）

// --- 例 ---
// （概念を理解するためのシンプルな例を1〜2個）

// =============================================
// 問題: {問題の説明}
// =============================================

function solution(/* 引数 */) {
  // TODO: ここに実装を書いてください
}

// --- テスト ---
console.assert(solution(/* テスト入力1 */) === /* 期待値1 */, "テスト1 失敗");
console.assert(solution(/* テスト入力2 */) === /* 期待値2 */, "テスト2 失敗");
console.assert(solution(/* テスト入力3 */) === /* 期待値3 */, "テスト3 失敗");

console.log("テストを実行: node src/stepXX/{filename}");
```

**復習ステップのテンプレート:**
- 復習対象のステップ範囲から混合問題を出題
- 過去のステップで学んだパターンを組み合わせた問題にする
- 問題ごとにどのパターンを使うかのヒントは入れない（自分で判断させる）

**LeetCode 計画ステップ（a付き）のテンプレート:**
- LeetCode問題文の要約
- 入出力例
- 制約条件
- `// TODO: どのパターンが使えるか考えてみよう` セクション
- `// TODO: アプローチをコメントで書いてみよう` セクション

**LeetCode 実装ステップ（b付き）のテンプレート:**
- 関数シグネチャ
- テストケース（LeetCodeの例 + エッジケース）
- `// TODO: ここに実装を書いてください`

### 5. ユーザーへの案内

テンプレートを生成したら以下を伝える:

1. このステップで学ぶ概念の簡潔な説明（3〜5文）
2. テンプレートファイルのパス
3. 実行コマンド: `node leetcode/src/stepXX/{filename}`
4. 「TODO部分を実装したら教えてください。レビューします！」

### 6. レビュー（ユーザーが実装後に再度このスキルを呼んだ場合）

ユーザーが「できた」「レビューして」等と言った場合:

1. 該当ファイルを読む
2. `node` で実行してテストが通るか確認
3. テスト結果に応じてフィードバック:
   - 全テスト通過 → 褒める + 改善点があれば提案 + 別解の紹介
   - テスト失敗 → ヒントを出す（答えは教えない）
4. 全テスト通過したら `plan.md` のチェックボックスを `- [x]` に更新
5. 次のステップがあることを案内する: 「次のステップに進むには `/leetcode-next` と入力してください」
